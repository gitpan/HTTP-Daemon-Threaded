
<html>
<head>
<title>HTTP::Daemon::Threaded::Socket</title>
</head>
<body>
<table width='100%' border=0 CELLPADDING='0' CELLSPACING='3'>
<TR>
<TD VALIGN='top' align=left><FONT SIZE='-2'>
 SUMMARY:&nbsp;CONSTR&nbsp;|&nbsp;<A HREF='#method_summary'>METHOD</a>
 </FONT></TD>
<TD VALIGN='top' align=right><FONT SIZE='-2'>
DETAIL:&nbsp;CONSTR&nbsp;|&nbsp;<A HREF='#method_detail'>METHOD</a>
</FONT></TD>
</TR>
</table><hr>
<h2>Class HTTP::Daemon::Threaded::Socket</h2>

<p>
<dl>
<dt><b>Inherits from:</b>
<dd><a href='../../../HTTP/Daemon/ClientConn.html'>HTTP::Daemon::ClientConn</a></dd>
</dt>
</dl>

<hr>


Enhances HTTP::Daemon::ClientConn with the ability to directly invoke
a object-specific event handler for the I/O handle whenever a
HTTP::Daemon::Threaded::IOSelector object detects an event on the handle. Also
provides interfaces to manage the handle's assignment to the
read, write, and exception selectors within the HTTP::Daemon::Threaded::IOSelector
object, as well as managing the removal from the selectors when
the I/O handle is closed.
<p>
Copyright&copy 2006, Dean Arnold, Presicient Corp., USA<br>
All rights reserved.
<p>
Licensed under the Academic Free License version 2.1, as specified in the
License.txt file included in this software package, or at
<a href='http://www.opensource.org/licenses/afl-2.1.php'>OpenSource.org</a>.


<p>

<dl>

<dt><b>Author:</b></dt>
	<dd>D. Arnold</dd>

<dt><b>Version:</b></dt>
	<dd>0.90</dd>

<dt><b>Since:</b></dt>
	<dd>2005-12-01
</dd>

<p>
<i>Unless otherwise noted, <code>$self

</code> is the object instance variable.</i>
<p>
<table border=1 cellpadding=3 cellspacing=0 width='100%'>
<tr bgcolor='#9800B500EB00'><th align=left><font size='+2'>Method Summary</font></th></tr>

<tr><td align=left valign=top>
<code><a href='#addAll'>addAll</a>()</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add ourself to all the selector's selectors


</td></tr>

<tr><td align=left valign=top>
<code><a href='#addExcept'>addExcept</a>()</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add ourself to the selector's exception selector


</td></tr>

<tr><td align=left valign=top>
<code><a href='#addNoWrite'>addNoWrite</a>()</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add ourself to the selector's read and exception selectors


</td></tr>

<tr><td align=left valign=top>
<code><a href='#addRead'>addRead</a>()</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add ourself to the selector's read selector


</td></tr>

<tr><td align=left valign=top>
<code><a href='#addWrite'>addWrite</a>()</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add ourself to the selector's write selector


</td></tr>

<tr><td align=left valign=top>
<code><a href='#close'>close</a>()</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Close the socket
</td></tr>

<tr><td align=left valign=top>
<code><a href='#daemon'>daemon</a>()</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return parent WebClient object
</td></tr>

<tr><td align=left valign=top>
<code><a href='#getContext'>getContext</a>()</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the current context object
</td></tr>

<tr><td align=left valign=top>
<code><a href='#getSelector'>getSelector</a>()</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the current selector
</td></tr>

<tr><td align=left valign=top>
<code><a href='#get_request'>get_request</a>($only_headers)</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get client request
</td></tr>

<tr><td align=left valign=top>
<code><a href='#handleSocketEvent'>handleSocketEvent</a>($eventmask)</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Handle an event on the socket
</td></tr>

<tr><td align=left valign=top>
<code><a href='#removeAll'>removeAll</a>()</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove ourself from all the selector's selectors


</td></tr>

<tr><td align=left valign=top>
<code><a href='#removeContext'>removeContext</a>()</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove the context object
</td></tr>

<tr><td align=left valign=top>
<code><a href='#removeExcept'>removeExcept</a>()</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove ourself from the selector's exception selector


</td></tr>

<tr><td align=left valign=top>
<code><a href='#removeNoWrite'>removeNoWrite</a>()</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove ourself from the selector's read and exception selectors


</td></tr>

<tr><td align=left valign=top>
<code><a href='#removeRead'>removeRead</a>()</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove ourself from the selector's read selector


</td></tr>

<tr><td align=left valign=top>
<code><a href='#removeSelector'>removeSelector</a>()</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove selector object
</td></tr>

<tr><td align=left valign=top>
<code><a href='#removeWrite'>removeWrite</a>()</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove ourself from the selector's write selector


</td></tr>

<tr><td align=left valign=top>
<code><a href='#send_error'>send_error</a>($status, $errormsg)</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return error response to a request
</td></tr>

<tr><td align=left valign=top>
<code><a href='#send_file_header'>send_file_header</a>()</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return response to a HEAD request for a file
</td></tr>

<tr><td align=left valign=top>
<code><a href='#send_file_response'>send_file_response</a>()</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return response to a GET or POST request for a file
</td></tr>

<tr><td align=left valign=top>
<code><a href='#send_redirect'>send_redirect</a>($loc, $status, $content)</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return redirect response to a request
</td></tr>

<tr><td align=left valign=top>
<code><a href='#send_response'>send_response</a>()</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return response to a GET or POST request
</td></tr>

<tr><td align=left valign=top>
<code><a href='#setContext'>setContext</a>($context, $getpeer)</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the context object
</td></tr>

<tr><td align=left valign=top>
<code><a href='#setSelector'>setSelector</a>($selector)</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the HTTP::Daemon::Threaded::IOSelector object
</td></tr>
</table>
<p>

<a name='method_detail'></a>
<table border=1 cellpadding=3 cellspacing=0 width='100%'>
<tr bgcolor='#9800B500EB00'>
	<th align=left><font size='+2'>Method Details</font></th>
</tr></table>

<a name='addAll'></a>
<h3>addAll</h3>
<pre>
addAll()
</pre><p>
<dl>
<dd>Add ourself to all the selector's selectors


<p>
<dd><dl>
<dt><b>Returns:</b><dd>HTTP::Daemon::Threaded::IOSelector object
</dd>
</dl></dd></dl><hr>

<a name='addExcept'></a>
<h3>addExcept</h3>
<pre>
addExcept()
</pre><p>
<dl>
<dd>Add ourself to the selector's exception selector


<p>
<dd><dl>
<dt><b>Returns:</b><dd>HTTP::Daemon::Threaded::IOSelector object
</dd>
</dl></dd></dl><hr>

<a name='addNoWrite'></a>
<h3>addNoWrite</h3>
<pre>
addNoWrite()
</pre><p>
<dl>
<dd>Add ourself to the selector's read and exception selectors


<p>
<dd><dl>
<dt><b>Returns:</b><dd>HTTP::Daemon::Threaded::IOSelector object
</dd>
</dl></dd></dl><hr>

<a name='addRead'></a>
<h3>addRead</h3>
<pre>
addRead()
</pre><p>
<dl>
<dd>Add ourself to the selector's read selector


<p>
<dd><dl>
<dt><b>Returns:</b><dd>HTTP::Daemon::Threaded::IOSelector object
</dd>
</dl></dd></dl><hr>

<a name='addWrite'></a>
<h3>addWrite</h3>
<pre>
addWrite()
</pre><p>
<dl>
<dd>Add ourself to the selector's write selector


<p>
<dd><dl>
<dt><b>Returns:</b><dd>HTTP::Daemon::Threaded::IOSelector object
</dd>
</dl></dd></dl><hr>

<a name='close'></a>
<h3>close</h3>
<pre>
close()
</pre><p>
<dl>
<dd>Close the socket. Removes the socket from the registered
HTTP::Daemon::Threaded::IOSelector, closes the handle, and deletes any registered
context and selector objects.


<p>
<dd><dl>
<dt><b>Returns:</b><dd>1
</dd>
</dl></dd></dl><hr>

<a name='daemon'></a>
<h3>daemon</h3>
<pre>
daemon()
</pre><p>
<dl>
<dd>Return parent WebClient object.
Overrides HTTP::Daemon::ClientConn::daemon to return


<p>
<dd><dl>
<dt><b>Returns:</b><dd>parent HTTP::Daemon::Threaded::WebClient object
</dd>
</dl></dd></dl><hr>

<a name='getContext'></a>
<h3>getContext</h3>
<pre>
getContext()
</pre><p>
<dl>
<dd>Returns the current context object.


<p>
<dd><dl>
<dt><b>Returns:</b><dd>an object
</dd>
</dl></dd></dl><hr>

<a name='getSelector'></a>
<h3>getSelector</h3>
<pre>
getSelector()
</pre><p>
<dl>
<dd>Return the current selector.


<p>
<dd><dl>
<dt><b>Returns:</b><dd>HTTP::Daemon::Threaded::IOSelector object
</dd>
</dl></dd></dl><hr>

<a name='get_request'></a>
<h3>get_request</h3>
<pre>
get_request($only_headers)
</pre><p>
<dl>
<dd>Get client request.
Overrides HTTP::Daemon::ClientConn::get_request().
Automatically extract weblog entry fragments if a WebLogger is configured.


<p>
<dd><dl>
<dt><b>Parameters:</b>
<dd><code>$only_headers</code> - boolean; true => only retrieve HTTP headers

</dd>
<dt><b>Returns:</b><dd>HTTP::Request object
</dd>
</dl></dd></dl><hr>

<a name='handleSocketEvent'></a>
<h3>handleSocketEvent</h3>
<pre>
handleSocketEvent($eventmask)
</pre><p>
<dl>
<dd>Handle an event on the socket. Invokes the handleSocketEvent()
method on any registered context object.


<p>
<dd><dl>
<dt><b>Parameters:</b>
<dd><code>$eventmask</code> - bitmask indicating read, write, or exception event

</dd>
<dt><b>Returns:</b><dd>the context object
</dd>
</dl></dd></dl><hr>

<a name='removeAll'></a>
<h3>removeAll</h3>
<pre>
removeAll()
</pre><p>
<dl>
<dd>Remove ourself from all the selector's selectors


<p>
<dd><dl>
<dt><b>Returns:</b><dd>HTTP::Daemon::Threaded::IOSelector object
</dd>
</dl></dd></dl><hr>

<a name='removeContext'></a>
<h3>removeContext</h3>
<pre>
removeContext()
</pre><p>
<dl>
<dd>Remove the context object.


<p>
<dd><dl>
<dt><b>Returns:</b><dd>HTTP::Daemon::Threaded::Socket object
</dd>
</dl></dd></dl><hr>

<a name='removeExcept'></a>
<h3>removeExcept</h3>
<pre>
removeExcept()
</pre><p>
<dl>
<dd>Remove ourself from the selector's exception selector


<p>
<dd><dl>
<dt><b>Returns:</b><dd>HTTP::Daemon::Threaded::IOSelector object
</dd>
</dl></dd></dl><hr>

<a name='removeNoWrite'></a>
<h3>removeNoWrite</h3>
<pre>
removeNoWrite()
</pre><p>
<dl>
<dd>Remove ourself from the selector's read and exception selectors


<p>
<dd><dl>
<dt><b>Returns:</b><dd>HTTP::Daemon::Threaded::IOSelector object
</dd>
</dl></dd></dl><hr>

<a name='removeRead'></a>
<h3>removeRead</h3>
<pre>
removeRead()
</pre><p>
<dl>
<dd>Remove ourself from the selector's read selector


<p>
<dd><dl>
<dt><b>Returns:</b><dd>HTTP::Daemon::Threaded::IOSelector object
</dd>
</dl></dd></dl><hr>

<a name='removeSelector'></a>
<h3>removeSelector</h3>
<pre>
removeSelector()
</pre><p>
<dl>
<dd>Remove selector object.


<p>
<dd><dl>
<dt><b>Returns:</b><dd>HTTP::Daemon::Threaded::Socket object
</dd>
</dl></dd></dl><hr>

<a name='removeWrite'></a>
<h3>removeWrite</h3>
<pre>
removeWrite()
</pre><p>
<dl>
<dd>Remove ourself from the selector's write selector


<p>
<dd><dl>
<dt><b>Returns:</b><dd>HTTP::Daemon::Threaded::IOSelector object
</dd>
</dl></dd></dl><hr>

<a name='send_error'></a>
<h3>send_error</h3>
<pre>
send_error($status, $errormsg)
</pre><p>
<dl>
<dd>Return error response to a request.
Overrides HTTP::Daemon::ClientConn::send_error().
Automatically writes weblog entry if a WebLogger is configured.


<p>
<dd><dl>
<dt><b>Parameters:</b>
<dd><code>$status</code> - <i>(optional)</i> HTTP status code of the error; default 400.
</dd>
<dd><code>$errormsg</code> - <i>(optional)</i> Error message text to be included body of response.

</dd>
<dt><b>Returns:</b><dd>HTTP status of the response
</dd>
</dl></dd></dl><hr>

<a name='send_file_header'></a>
<h3>send_file_header</h3>
<pre>
send_file_header()
</pre><p>
<dl>
<dd>Return response to a HEAD request for a file.
Borrowed from HTTP::Daemon::ClientConn::send_file_response(),
but with content omitted. Automatically write weblog entry
if a WebLogger is configured.

@params $file	path of file to be returned


<p>
<dd><dl>
<dt><b>Returns:</b><dd>HTTP status of the response
</dd>
</dl></dd></dl><hr>

<a name='send_file_response'></a>
<h3>send_file_response</h3>
<pre>
send_file_response()
</pre><p>
<dl>
<dd>Return response to a GET or POST request for a file.
Overrides HTTP::Daemon::ClientConn::send_file_response().
Automatically write weblog entry if a WebLogger is configured.

@params $file	path of file to be returned


<p>
<dd><dl>
<dt><b>Returns:</b><dd>HTTP status of the response
</dd>
</dl></dd></dl><hr>

<a name='send_redirect'></a>
<h3>send_redirect</h3>
<pre>
send_redirect($loc, $status, $content)
</pre><p>
<dl>
<dd>Return redirect response to a request.
Overrides HTTP::Daemon::ClientConn::send_redirect().
Automatically writes weblog entry if a WebLogger is configured.


<p>
<dd><dl>
<dt><b>Parameters:</b>
<dd><code>$loc</code> - URL of new target location
</dd>
<dd><code>$status</code> - <i>(optional)</i> redirect status code (default 301).
</dd>
<dd><code>$content</code> - <i>(optional)</i> Any alternate content to be returned to client.

</dd>
<dt><b>Returns:</b><dd>HTTP status of the response
</dd>
</dl></dd></dl><hr>

<a name='send_response'></a>
<h3>send_response</h3>
<pre>
send_response()
</pre><p>
<dl>
<dd>Return response to a GET or POST request.
Overrides HTTP::Daemon::ClientConn::send_response().
Automatically writes weblog entry if a WebLogger is configured.

@params $res	HTTP::Response object to generate response; alternately,
may be simple raw content, from which an HTTP::Response object
will be generated.


<p>
<dd><dl>
<dt><b>Returns:</b><dd>HTTP status of the response
</dd>
</dl></dd></dl><hr>

<a name='setContext'></a>
<h3>setContext</h3>
<pre>
setContext($context, $getpeer)
</pre><p>
<dl>
<dd>Set the context object. The registered object should implement
a handleSocketEvent() method. Also gets a printable peer IP address


<p>
<dd><dl>
<dt><b>Parameters:</b>
<dd><code>$context</code> - the registered object
</dd>
<dd><code>$getpeer</code> - boolean; true means get printable peer address

</dd>
<dt><b>Returns:</b><dd>HTTP::Daemon::Threaded::Socket object
</dd>
</dl></dd></dl><hr>

<a name='setSelector'></a>
<h3>setSelector</h3>
<pre>
setSelector($selector)
</pre><p>
<dl>
<dd>Set the HTTP::Daemon::Threaded::IOSelector object.


<p>
<dd><dl>
<dt><b>Parameters:</b>
<dd><code>$selector</code> - the HTTP::Daemon::Threaded::IOSelector object

</dd>
<dt><b>Returns:</b><dd>HTTP::Daemon::Threaded::Socket object
</dd>
</dl></dd></dl><hr>

<small>
<center>
<i>Generated by psichedoc on Mon Aug 28 09:45:39 2006</i>
</center>
</small>
</body>
</html>
