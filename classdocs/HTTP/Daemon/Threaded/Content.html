
<html>
<head>
<title>HTTP::Daemon::Threaded::Content</title>
</head>
<body>
<table width='100%' border=0 CELLPADDING='0' CELLSPACING='3'>
<TR>
<TD VALIGN='top' align=left><FONT SIZE='-2'>
 SUMMARY:&nbsp;<A HREF='#constructor_summary'>CONSTR</a>&nbsp;|&nbsp;<A HREF='#method_summary'>METHOD</a>
 </FONT></TD>
<TD VALIGN='top' align=right><FONT SIZE='-2'>
DETAIL:&nbsp;<A HREF='#constructor_detail'>CONSTR</a>&nbsp;|&nbsp;<A HREF='#method_detail'>METHOD</a>
</FONT></TD>
</TR>
</table><hr>
<h2>Class HTTP::Daemon::Threaded::Content</h2>

<p>
<dl>
<dt><b>Inherits from:</b>
<dd><a href='../../../HTTP/Daemon/Threaded/Logable.html'>HTTP::Daemon::Threaded::Logable</a></dd>
</dt>
</dl>

<hr>


Base class for Content classes.
Provides an interface definition for
generating or storing content, or generating a header,
given an HTTP::Request, a URI, URL parameters or POSTed content,
HTTP::Daemon::Threaded::SessionCache object, and
a HTTP::Daemon::Threaded::ContentParams context
<p>
Copyright&copy 2006, Dean Arnold, Presicient Corp., USA<br>
All rights reserved.
<p>
Licensed under the Academic Free License version 2.1, as specified in the
License.txt file included in this software package, or at
<a href='http://www.opensource.org/licenses/afl-2.1.php'>OpenSource.org</a>.


<p>

<dl>

<dt><b>Author:</b></dt>
	<dd>D. Arnold</dd>

<dt><b>Version:</b></dt>
	<dd>0.90</dd>

<dt><b>Since:</b></dt>
	<dd>2006-08-21
</dd>

<p>
<i>Unless otherwise noted, <code>$self

</code> is the object instance variable.</i>
<p>
<table border=1 cellpadding=3 cellspacing=0 width='100%'>
<tr bgcolor='#9800B500EB00'><th align=left><font size='+2'>Constructor Summary</font></th></tr>

<tr><td align=left valign=top>
<code><a href='#HTTP::Daemon::Threaded::Content'>new</a>(LogLevel =&gt; <i>value</i>, EventLogger =&gt; <i>value</i>, SessionCache =&gt; <i>value</i>, ContentParams =&gt; <i>value</i>)</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Stores ContentParams, SessionCache, and Logger objects,
and performs any content-specific initialization
</td></tr>
</table><p>

<table border=1 cellpadding=3 cellspacing=0 width='100%'>
<tr bgcolor='#9800B500EB00'><th align=left><font size='+2'>Method Summary</font></th></tr>

<tr><td align=left valign=top>
<code><a href='#getContent'>getContent</a>($fd, $request, $uri, $params, $session)</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate and send content
</td></tr>

<tr><td align=left valign=top>
<code><a href='#getHeader'>getHeader</a>($fd, $request, $uri, $params, $session)</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate and send content header only
</td></tr>

<tr><td align=left valign=top>
<code><a href='#putContent'>putContent</a>($fd, $request, $uri, $content, $session)</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Put content
</td></tr>

<tr><td align=left valign=top>
<code><a href='#setCookie'>setCookie</a>($res, $session)</code>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set a response cookie
</td></tr>
</table>
<p>

<a name='constructor_detail'></a>
<table border=1 cellpadding=3 cellspacing=0 width='100%'>
<tr bgcolor='#9800B500EB00'>
	<th align=left><font size='+2'>Constructor Details</font></th>
</tr>
</table>

<a name='new'></a>
<h3>new</h3>
<pre>
new(LogLevel =&gt; <i>value</i>, EventLogger =&gt; <i>value</i>, SessionCache =&gt; <i>value</i>, ContentParams =&gt; <i>value</i>)
</pre><p>
<dl>
<dd>Stores ContentParams, SessionCache, and Logger objects,
and performs any content-specific initialization.


<p>
<dd><dl>
<dt><b>Parameters:</b>
<dd><code>LogLevel</code> =&gt; <i>(optional)</i> logging level; 1 => errors only; 2 => errors and warnings only; 3 => errors, warnings,
and info messages; default 1
</dd>
<dd><code>EventLogger</code> =&gt; <i>(optional)</i> Instance of a HTTP::Daemon::Threaded::Logger to receive
event notifications (except for web requests)
</dd>
<dd><code>SessionCache</code> =&gt; <i>(optional)</i> threads::shared object implementing HTTP::Daemon::Threaded::SessionCache
</dd>
<dd><code>ContentParams</code> =&gt; <i>(optional)</i> name of a ContentsParam concrete implementation

@returns a HTTP::Daemon::Threaded::Content object
</dd>
</dl></dd></dl><hr>

<p>

<a name='method_detail'></a>
<table border=1 cellpadding=3 cellspacing=0 width='100%'>
<tr bgcolor='#9800B500EB00'>
	<th align=left><font size='+2'>Method Details</font></th>
</tr></table>

<a name='getContent'></a>
<h3>getContent</h3>
<pre>
getContent($fd, $request, $uri, $params, $session)
</pre><p>
<dl>
<dd>Generate and send content. Uses input URI, URL parameters, Cookie and Session
objects to load and/or generate content, including
providing any needed HTTP headers. Note that the <code>$params</code>
parameter <i>may</i> be an array of multipart HTTP::Message objects if
a multipart POST request was received (e.g., for file upload).
<p>
Content handlers should restrict the HTTP::Daemon::ClientConn response
methods to <code>send_response(), send_file_response(), send_error(), or
send_redirect()</code>, as HTTP::Daemon::Threaded::Socket provides
automatic web logging for those methods.


<p>
<dd><dl>
<dt><b>Parameters:</b>
<dd><code>$fd</code> - HTTP::Daemon::Threaded::Socket object for the client
</dd>
<dd><code>$request</code> - HTTP::Request object
</dd>
<dd><code>$uri</code> - request URI
</dd>
<dd><code>$params</code> - hashref of URL parameters (key => value) OR arrayref of HTTP::Message
objects (for multipart POSTs)
</dd>
<dd><code>$session</code> - <i>(optional)</i> a HTTP::Daemon::Threaded::Session object,
if the application configured a SessionCache class, and if WebClient
was able to recover an existing session from such a SessionCache.
</dd>
</dl></dd></dl><hr>

<a name='getHeader'></a>
<h3>getHeader</h3>
<pre>
getHeader($fd, $request, $uri, $params, $session)
</pre><p>
<dl>
<dd>Generate and send content header only. Uses input URI, URL parameters, Cookie
and Session objects to load and/or generate content, including
providing any needed HTTP headers.
<p>
Content handlers should restrict the HTTP::Daemon::ClientConn response
methods to <code>send_response(), send_file_header(), send_error(), or
send_redirect()</code>, as HTTP::Daemon::Threaded::Socket provides
automatic web logging for those methods.


<p>
<dd><dl>
<dt><b>Parameters:</b>
<dd><code>$fd</code> - HTTP::Daemon::Threaded::Socket object for the client
</dd>
<dd><code>$request</code> - HTTP::Request object
</dd>
<dd><code>$uri</code> - request URI
</dd>
<dd><code>$params</code> - hashref of URL parameters (key => value)
</dd>
<dd><code>$session</code> - <i>(optional)</i> a HTTP::Daemon::Threaded::Session object,
if the application configured a SessionCache class, and if WebClient
was able to recover an existing session from such a SessionCache.
</dd>
</dl></dd></dl><hr>

<a name='putContent'></a>
<h3>putContent</h3>
<pre>
putContent($fd, $request, $uri, $content, $session)
</pre><p>
<dl>
<dd>Put content. Uses input URI, URL parameters, Cookie and Session
objects to process received content (via PUT request), including
providing any needed HTTP headers.
<p>
Content handlers should restrict the HTTP::Daemon::ClientConn response
methods to <code>send_response(), send_file_response(), send_file_header(), send_error(), or
send_redirect()</code>, as HTTP::Daemon::Threaded::Socket provides
automatic web logging for those methods.


<p>
<dd><dl>
<dt><b>Parameters:</b>
<dd><code>$fd</code> - HTTP::Daemon::Threaded::Socket object for the client
</dd>
<dd><code>$request</code> - HTTP::Request object
</dd>
<dd><code>$uri</code> - request URI
</dd>
<dd><code>$content</code> - decoded PUT content
</dd>
<dd><code>$session</code> - <i>(optional)</i> a HTTP::Daemon::Threaded::Session object,
if the application configured a SessionCache class, and if WebClient
was able to recover an existing session from such a SessionCache.
</dd>
</dl></dd></dl><hr>

<a name='setCookie'></a>
<h3>setCookie</h3>
<pre>
setCookie($res, $session)
</pre><p>
<dl>
<dd>Set a response cookie. Convenience method to format and set a Set-Cookie header.


<p>
<dd><dl>
<dt><b>Parameters:</b>
<dd><code>$res</code> - HTTP::Response object
</dd>
<dd><code>$session</code> - HTTP::Daemon::Threaded::Session object from which to extract the cookie.

</dd>
<dt><b>Returns:</b><dd>this Content object
</dd>
</dl></dd></dl><hr>

<small>
<center>
<i>Generated by psichedoc on Mon Aug 28 09:45:39 2006</i>
</center>
</small>
</body>
</html>
